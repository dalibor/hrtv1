:javascript
  var _response_id = "#{@response.id}"

- coding_name = friendly_name_for_coding_copy(params[:id]).singularize
- coding_name = "Health Function" if coding_name == "Purpose"

- content_for :sub_nav do
  = render 'shared/sub_nav_projects'

%h1.main_heading= friendly_name_for_coding_copy(params[:id])

= render "classifications/getting_started/#{getting_started_partial(params[:id])}"

%table.workplan
  %thead
    %tr.filler2
      %th{:colspan => 3}
      %th.no-padding{:colspan => 100}
        %ul.tabs
          %li= link_to 'Yearly', edit_response_classification_path(@response, spend_coding_type(params[:id])), :class => (params[:id].match('Spend') ? 'active' : nil)
          %li= link_to 'Quarterly', edit_response_classification_path(@response, budget_coding_type(params[:id])), :class => (params[:id].match('Budget') ? 'active' : nil)

    %tr.head
      %th{:colspan => 3}
      - start_year = @response.request.start_date.try(:year)
      - end_year = @response.request.end_date.try(:year)
      - if start_year == end_year
        - prev_fy = "FY #{start_year}"
        - next_fy = "FY #{start_year+1}"
      - else
        - prev_fy = "FY #{start_year}-#{end_year}"
        - next_fy = "FY #{start_year+1}-#{end_year+1}"
      %th= prev_fy
      %th{:colspan => 10}= next_fy

    %tr.head
      %th.nested_name.fixed Activity
      %th.name{:colspan => 100}= coding_name
      %th Spend
      %th Budget
      %th.actions

  %tbody
    - @projects.each do |project|
      - project.activities.ordered.each do |activity|
        = render 'activity_row', :project => project, :activity => activity

%ul#purpose_menu.mcdropdown_menu
  - @codes.sort_by(&:short_display).each do |code|
    = render 'code_row', :code => code

%br
- if @projects.empty? || !@response.projects_have_activities?
  %p.centered.attention
    You have not added any activities.
    = link_to "Add them now.", edit_response_workplan_path(@response, :spend)
